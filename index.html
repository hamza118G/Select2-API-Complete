<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Include the necessary CSS and JavaScript files -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <title>Document</title>
</head>
<style>
    select {
        width: 200px;
    }
</style>

<body>
    <select id="a" class="js-data-example-ajax" multiple="multiple"></select>
    <select id="aa" class="js" id="asdd" multiple="multiple"></select>
    




    <script>
        


        $.ajax({
            url: 'https://4c98-39-62-209-205.ngrok-free.app/api/EcommerceProduct/GetProductCategories',

            headers: {
                'Content-Type': 'application/json',
                "ngrok-skip-browser-warning": "69420",
            },
            method: 'GET',
            dataType: 'json',

            success: function (data) {
                console.log(data);
                const parentData = data.filter((value, index) => {
                    return !value.ParentId;
                })
                const childData = data.filter((value, index) => {
                    return value.ParentId;
                })
                console.log("ParentData", parentData);
                console.log("ChildData", childData);
                parentData.map(test => {


                    let ParentNullList = document.getElementById("a")


                    console.log("ParentNullList", ParentNullList);

                    let cdata = childData.map((value,index) => {
                        return test.Id == value.ParentId ? `<option> > ${value.Name}</option>` : false
                     })
                    ParentNullList.insertAdjacentHTML('beforeend',
                        `<option> ${test.Name}</option> <br> ${cdata}`
                    );



                    $('.js-data-example-ajax').select2({
                        placeholder: "Select a Parent",
                        allowClear: true
                    })


                })


            }


        })





        
        // Variations API





        $.ajax({
            url: 'https://4c98-39-62-209-205.ngrok-free.app/api/EcommerceProduct/GetProductVariations',

            headers: {
                'Content-Type': 'application/json',
                "ngrok-skip-browser-warning": "69420",
            },
            method: 'GET',
            dataType: 'json',

            success: function (data) {
               
                console.log(data);

               
                const parentData = data.filter((value, index) => {
                    return value.AttributeId
                })
                const childData = data.filter((value, index) => {
                    return value.AttributeId;
                })
                console.log("ParentData", parentData);
                console.log("ChildData", childData);
                let uniqueChars = [];
                parentData.map(test => {

                    if (!uniqueChars.includes(test.AttributeName)) {

                    uniqueChars.push(test.AttributeName);
                    let ParentNullList = document.getElementById("aa")


                    console.log("ParentNullList", ParentNullList);

                    let cdata = childData.map((value,index) => {
                        return test.AttributeId == value.AttributeId ? `<option> > ${value.Name}</option>` : false
                     })
                   
                    ParentNullList.insertAdjacentHTML('beforeend',
                        `<option> ${test.AttributeName}</option> <br> ${cdata}`
                    );

                    }

                    $('.js').select2({
                        placeholder: "Select a Variation",
                        allowClear: true
                    })


                })


            }


        })








    </script>


<script>
















// $.ajax({
//              url: 'https://4c98-39-62-209-205.ngrok-free.app/api/EcommerceProduct/GetProductVariations',

//              headers: {
//                  'Content-Type': 'application/json',
//                  "ngrok-skip-browser-warning": "69420",
//              },
//              method: 'GET',
//              dataType: 'json',

//              success: function (data) {
//                  console.log("Variations:",  data);
//                  let uniqueChars = []
//                 data.map(tests => {
                    
//                     if (!uniqueChars.includes(tests.AttributeName)) {

//                         uniqueChars.push(tests.AttributeName);
//                         let VariationNameList = document.getElementById("aa");
//                         console.log("VARIATION-NAME-List", VariationNameList);                
// VariationNameList.insertAdjacentHTML('beforeend',
//                         `<option  data-attributeids="${tests.AttributeId}"> ${tests.AttributeName}</option> <br>`
//                     );   

//                     function clickedsomethings(ele) {

// let VariationAPI = (ele.getAttribute('data-attributeids'))

// let VariationsLists = document.getElementById("aa")


// data.map(test => {
//     if (VariationAPI == test.AttributeId) {

//         console.log("Variation-AttributeId:", VariationAPI)

//         console.log(VariationsLists)

//         VariationsLists.insertAdjacentHTML('beforeend', ` ${test.Name}<br> `)



//     }

// })


// }

   
// $('.js').select2({
//                         placeholder: "Select a Variations",
//                         allowClear: true
//                     })                   
// }
                    
                  

                   
                    
                    
                  
                    
                    
                    

                   


                   



                   


// })






//         }
       
//     })
   


                      
</script>



</body>

</html>